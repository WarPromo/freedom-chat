<html lang="en"><head>
    <link rel="icon" href="https://www.pngmart.com/files/6/Bald-Eagle-PNG-Free-Download.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height,  initial-scale=1.0, user-scalable=no;user-scalable=0;">
    <meta name="description" content="游분Absolutely no rules游분, say anything you want! Debate, trolling, and general conversation is all welcome here. Get paired with strangers, and discuss whatever游때">
    <meta name="robots" content="noindex,nofollow">
    <meta content="TheFreedomChat - Absolutely no rules, text with strangers" property="og:title">
    <meta name="keywords" content="freedomchat, strangers, chatroom, freespeech">
    <meta content="游분Absolutely no rules游분, say anything you want! Debate, trolling, and general conversation is all welcome here. Get paired with strangers, and discuss whatever游때" property="og:description">
    <meta content="www.thefreedomchat.com" property="og:site_name">
    <meta content="https://discord-rich-embed-test.warpromo.repl.co/freedomchaticon.png" property="og:image">
    <meta content="#1505fc" property="theme-color">
    <title>Speak freely游분The Freedom Chat</title>
    <script src="socket.io.js"></script>
  </head>
  <body id="body" onunload="pageunload()" style="filter: invert(0%); background-color: white;" class="vsc-initialized">

  <div id="entirechatbox">

  <table id="left" cellspacing="5">

    <tbody><tr>
      <td id="categories">

        <p id="categoriestitle" style="font-family:tahoma; font-weight:100">CATEGORIES</p>

        <div id="categoryholder">


          <div id="categorybuttons"></div>
        </div>

      </td>
    </tr>
    <tr>
      <td id="switchcontainer">

        <label class="switch">
          <input id="checkbox" type="checkbox">
          <span class="slider round"></span>
        </label>

        <script>


          var clickEvent = new MouseEvent("click", {
              "view": window,
              "bubbles": true,
              "cancelable": false
          });

          let theswitch = document.getElementById('checkbox');

          changestate();

          theswitch.onclick = changestate



          function changestate(){
            if(theswitch.checked){
              document.getElementById("body").style.filter = "invert(100%)";
              document.getElementById("body").style.backgroundColor = "#191919";
            }
            else{
              document.getElementById("body").style.filter = "invert(0%)";
              document.getElementById("body").style.backgroundColor = "white";
            }
          }
        </script>
      </td>
    </tr>
  </tbody></table>

  <table id="right" cellspacing="5">

    <tbody><tr>
      <th id="messages">

        <div id="messagestext">
          <p class="messagestexts"><br><br><b>WELCOME! PLEASE READ: </b> <br>Absolutely no rules, say and do anything you want. <br>Click <b>"Start"</b> to get paired up with someone! <br>Currently you're not talking to anyone.</p>
          <p id="messageinsert" class="messagestexts"><br><br></p>
        </div>

      </th>
    </tr>
    <tr>

      <td>

        <table id="inputs" width="100%">

          <tbody><tr>
            <td class="inputrow">
              <button id="changename" class="regularbutton" onclick="userinputbox()">Set Name</button><input id="usernameinput" placeholder="Must be 1-32 characters" maxlength="32" oninput="userinputtyping()">
            </td>

          </tr>

          <tr>
            <td class="inputrow">
              <button id="nextpersonbutton" class="regularbutton" onclick="nextpersonbuttonclick()"><div id ="nextpersontext">Start<div></button><textarea id="messageboxinput" oninput="typing()" onkeypress="inputbox(event)" placeholder="Enter to type..." maxlength="300"></textarea>
            </td>
          </tr>


        </tbody></table>

      </td>

    </tr>

  </tbody></table>
</div>

<style>

  #entirechatbox{

    position: relative;
    display: inline-block;
    left: 50%;
    transform: translate(-50%, 10%);

  }
  .regularbutton{
    border-radius: 0px;
    border: 1px solid black;
  }


</style>




  <style>
    .switch {
      position: relative;
      display: inline-block;
      transform: translate(-50%);
      left: 50%;
      width: 60px;
      height: 34px;
    }

    /* Hide default HTML checkbox */
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* The slider */
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      -webkit-transition: .0s;
      transition: .0s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      -webkit-transition: .0s;
      transition: .0s;
    }

    input:checked + .slider {
      background-color: #2196F3;
    }

    input:checked + .slider:before {
      -webkit-transform: translateX(26px);
      -ms-transform: translateX(26px);
      transform: translateX(26px);
    }

    /* Rounded sliders */
    .slider.round {
      border-radius: 34px;
    }

    .slider.round:before {
      border-radius: 50%;
    }
  </style>



  <style>

    * {
      touch-action: manipulation;
    }

    :root{
      --chatborder: #cfcfcf;
    }


    button{
      color:black;
      border: 1px solid gray;
    }

    button:hover{
      background-color: lightgray;

    }

    button:active:hover{
      background-color: #bebebe;
    }

    button:


    body{
      position: relative;
      overflow-x: hidden;
      overflow-y: scroll;
      filter: invert(100%);
      background-color:#191919;
    }
    #liberty{
      position: absolute;
      bottom: -50px;
      left: -30px;
      z-index: -1;
      transform: scale(0.9, 0.9);


    }

    #eagle{
      position: absolute;
      bottom: -700px;
      right: -500px;
      z-index: -1;
      transform: scale(-0.3, 0.3);


    }


    #left{
      position: relative;
      display: inline-block;
      vertical-align: top;
    }

    #messageinsert{
      color: gray;
    }

    #switchcontainer{
      height: 70px;
    }

    #right{
      position: relative;
      display: inline-block;
      verical-align: top;
    }

    #categories{

      width: 300px;
      height: max(30vw, 400px);
      background-color: #dddddd;
      border: 3px solid var(--chatborder);


    }

    #categoriestitle{
      position: relative;
      text-decoration: underline;
      font-size: 40px;
      text-align: center;
    }

    #categorybuttons{
      position: relative;
      width: 150px;
      left:50%;
      transform: translate(-50%, 0);

    }

    .categorybutton{
      width: 150px;
      margin-top: 5px;
      font-size: 18px;

    }


    #messages{
      position: relative;
      height: max(30vw,370px);
      width: max(50vw,350px);
      background-color: #dddddd;
      border: 3px solid var(--chatborder);
      text-align: left;
    }

    #messagebox{
      height: 70px;
      width: 100%;
    }

    #changename{
      height: 34px;
      text-overflow: hidden;
      position: relative;
      left: 1.4%;
      border: solid 1px var(--chatborder);

    }

    #usernameinput{
      width: 60%;
      height: 34px;
      font-size: 20px;
      overflow:hidden;
      position: relative;
      vertical-align: top;
      margin-left: -1px;
      box-sizing: border-box;
      left: 1.4%;
      border-radius: 0px;
      border: solid 1px var(--chatborder);
      padding: 4px;
      font-family: Garamond
    }

    textarea{
      resize: none;
    }

    #nextpersonbutton{
      height: 110px;
      width: 67px;


      position: relative;
      left: 1.4%;
      border: solid 1px var(--chatborder);

    }

    #nextpersontext{

      text-align: center;
      font-size: 25px;
      font-family:Garamond;

    }

    #messageboxinput{
      width: 80%;
      height: 110px;
      font-size: 22px;

      overflow-x:hidden;

      position: relative;

      vertical-align: top;

      bottom: 1px;
      margin-left: -1px;

      box-sizing: border-box;
      left: 1.4%;
      border-radius: 0px;
      border: solid 1px var(--chatborder);
      padding: 4px;
      font-family: Garamond
    }
    input:focus,
select:focus,
textarea:focus,
button:focus {
    outline: none;
}


    #inputs{
      border-collapse: collapse;
      background-color: #dddddd;
      border: 3px solid var(--chatborder);
    }

    .inputrow{
      height: 45px;
    }

    #messagestext{

      position: absolute;
      top: 0%;
      left: 5%;
      height: 100%;
      width: 95%;
      overflow-y: scroll;
      overflow-x: hidden;


    }

    .messagestexts{
      font-weight:normal;
      width: 90%;
      text-overflow: inherit;
      font-family: Garamond;
      font-size: 23px;
      margin: 0px;
    }


  </style>

  <script>

    document.getElementById("usernameinput").value = "bobby";


    function addmessage(message){

      let messagebox = document.getElementById("messagestext");

      let newmessage = document.createElement("p");

      newmessage.innerHTML = message;
      newmessage.classList.add("messagestexts");


      let scroll = 55 > Math.abs(messagebox.scrollTop - (messagebox.scrollHeight - messagebox.clientHeight));

      messagebox.insertBefore(newmessage, document.getElementById("messageinsert"));

      if(scroll) messagebox.scrollTop = messagebox.scrollHeight - messagebox.clientHeight

    }

    let currentname = "bobby";

    function userinputbox() {

      let inputbox = document.getElementById("usernameinput")

      let name = inputbox.value;

      if(name.trim() == "") return;

      console.log(inputbox.value);

      socket.emit("setusername", name);
      currentname = name;
      userinputtyping();

    }

    function userinputtyping(){

      let inputbox = document.getElementById("usernameinput")

      let name = inputbox.value;
      let box = document.getElementById("changename")

      if(name.trim() == ""){
        box.disabled = true;
        return;
      }
      else{
        box.disabled = false;
      }



      if(name != currentname){

        console.log("not equal")
        box.style.fontWeight = "bold";


      }
      else{
        console.log("equal")
        box.style.fontWeight = null;
      }


    }





  </script>

  <script>

    const socket = io('https://api.thefreedomchat.com:6969');


    let states = ["Start", "Stop", "Exit"];
    let state = states[0];

    let quack = new Audio("Quack Sound Effect (128 kbps).mp3");
    let click = new Audio("Hard Click.mp3");

    let categories = [];
    let currentcategory;

    console.log("CONNECTING");

    socket.on("connect", () => {

      console.log("connected");
      socket.emit("getcategories");

    })

    socket.on("chatmessage", (user, message) =>{
      addmessage(`
        <b style="color:red">
        ${user}</b>:
        ${message}
      `);
    });

    socket.on("personfound", (user) => {

      addmessage(`
        Say hi to
        <b style="color:red">
        ${user}</b>!
      `);

      let thebutton = document.getElementById("nextpersontext");
      state = states[2];
      thebutton.innerText = state;
      quack.play();

    });

    socket.on("roomleft", (user) => {

      addmessage(`
        <b style="color:red">
        ${user}</b> has left...
      `);

      let thebutton = document.getElementById("nextpersontext");
      state = states[0];
      thebutton.innerText = state;

      click.play();

    })

    socket.on("queueleft", (user) => {

      addmessage(`
        Queue left...
      `);

      let thebutton = document.getElementById("nextpersontext");
      state = states[0];
      thebutton.innerText = state;

    })

    socket.on("queuejoined", (user) => {

      addmessage(`Searching <b style="color:red">${currentcategory}</b>...`)

      let thebutton = document.getElementById("nextpersontext");
      state = states[1]
      thebutton.innerText = state;

    })

    socket.on("log", (message) => {

      addmessage(message);

    })

    socket.on("namechanged", username => {

      addmessage(`
        name changed to
        <b style="color:blue">
        ${username}</b>...
      `);

    })

    socket.on("starttyping", username => {

      let messageinsert = document.getElementById("messageinsert");

      messageinsert.innerHTML = `${username} is typing<br><br>`;

    });

    socket.on("stoptyping", username => {

      messageinsert.innerHTML = `<br><br>`;

    })

    socket.on("categories", categoryList => {

      let thestyle = `<div style="color:red; text-align:center">CATEGORY</div>`;

      console.log("RECIEVED: " + categoryList);

      let section = document.getElementById("categorybuttons")

      section.innerHTML = "";

      categories = [];

      for(var a = 0; a < categoryList.length; a++){

        let newbutton = document.createElement("button");
        let text = document.createElement("p");

        text.innerHTML = categoryList[a];

        if(a == 0){

          text.innerHTML = thestyle.replace("CATEGORY", text.innerHTML);
          currentcategory = categoryList[a];

        }

        newbutton.append(text);

        newbutton.onclick = function(){

          for(var i = 0; i < categories.length; i++){
            categories[i].firstChild.innerHTML = categoryList[i];
          }


          currentcategory = newbutton.firstChild.innerHTML;
          newbutton.firstChild.innerHTML = thestyle.replace("CATEGORY", newbutton.firstChild.innerHTML);




        }

        newbutton.classList.add("categorybutton");



        section.append(newbutton);


        categories.push(newbutton);


      }


    })

    document.getElementById("nextpersontext").innerText = state;

    function nextpersonbuttonclick(){


      let thebutton = document.getElementById("nextpersontext");


      console.log(thebutton);


      if(state == states[0]){

        console.log("SENT JOINQUEUE")

        socket.emit("joinqueue", currentcategory);

      }

      else if(state == states[1]){

        socket.emit("leavequeue")

      }

      else if(state == states[2]){


        socket.emit("leaveroom");
        thebutton.innerText = state;


      }

    }

    let stoptyping;
    let istyping = false

    function typing(){


      if(istyping == false){

        socket.emit("starttyping");
      }

      if(stoptyping != undefined){
        clearTimeout(stoptyping);
      }

      stoptyping = setTimeout(stoptypingping, 600);

      istyping = true;


    }

    function stoptypingping(){

      if(istyping == true){

        socket.emit("stoptyping");
      }
      istyping = false;
    }

    function inputbox(event) {

      if (event.keyCode == 13) {

        event.preventDefault();

        let inputbox = document.getElementById("messageboxinput")

        let message = inputbox.value;

        if(state != states[2]) return;

        if(message.trim() == "") return;

        console.log(inputbox.value);

        inputbox.value = "";

        socket.emit("sendmessage", message);


      }

    }

    let categoriesobj = document.getElementById("categories");
    let messagesobj = document.getElementById("messages");

    let categorieswidth = categoriesobj.style.width;
    let messageswidth = messagesobj.style.width;

    mobilesupport();

    function mobilesupport(){

      let ct = categoriesobj.getBoundingClientRect();
      let mt = messagesobj.getBoundingClientRect();

      console.log(ct, mt);



      if(ct.top != mt.top){
        categoriesobj.style.width = "100vw";
        messagesobj.style.width = "100vw";
        document.getElementById("entirechatbox").style.transform = "translate(-50%)"

      }


    }



  </script>


</body></html>
